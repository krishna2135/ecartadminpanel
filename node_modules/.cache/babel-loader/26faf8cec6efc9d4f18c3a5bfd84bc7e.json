{"ast":null,"code":"import _classCallCheck from \"E:\\\\ecart\\\\Admin-eCommerce-ReactJS\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"E:\\\\ecart\\\\Admin-eCommerce-ReactJS\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"E:\\\\ecart\\\\Admin-eCommerce-ReactJS\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"E:\\\\ecart\\\\Admin-eCommerce-ReactJS\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"E:\\\\ecart\\\\Admin-eCommerce-ReactJS\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"E:\\\\ecart\\\\Admin-eCommerce-ReactJS\\\\src\\\\components\\\\Categories\\\\SubCategory.jsx\";\nimport React, { Component } from 'react';\nimport './subcategory.scss';\nimport axios from 'axios';\nimport { url, headers } from '../../config';\nimport { connect } from 'react-redux';\n\nvar SubCategory =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(SubCategory, _Component);\n\n  function SubCategory() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, SubCategory);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(SubCategory)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      open: true,\n      comfirm_delete: true,\n      name: '',\n      message: ''\n    };\n\n    _this.openUpdateCategory = function (name) {\n      _this.setState({\n        name: name,\n        open: !_this.state.open,\n        message: ''\n      });\n    };\n\n    _this.handleImage = function (e) {\n      var file = e.target.files[0];\n      var reader = new FileReader();\n      reader.readAsDataURL(file);\n\n      reader.onloadend = function () {\n        _this.setState({\n          file: file,\n          image: reader.result\n        });\n      };\n    };\n\n    return _this;\n  }\n\n  _createClass(SubCategory, [{\n    key: \"deleteCategory\",\n    value: function deleteCategory(id) {\n      var _this2 = this;\n\n      axios.delete(url + '/subcategory/' + id, headers(this.props.user.token)).then(function (res) {\n        _this2.setState({\n          comfirm_delete: true,\n          message: 'Success delete subcategory'\n        });\n\n        _this2.props.update();\n      }).catch(function (err) {\n        _this2.setState({\n          comfirm_delete: true,\n          message: 'Failed delete subcategory'\n        });\n      });\n    }\n  }, {\n    key: \"updateCategory\",\n    value: function updateCategory(e, id) {\n      var _this3 = this;\n\n      e.preventDefault();\n      var _this$state = this.state,\n          name = _this$state.name,\n          file = _this$state.file,\n          image = _this$state.image;\n      var formData = new FormData();\n      formData.append('image', file); //post data if no change image\n\n      if (name && !file) {\n        var data = {\n          name: name,\n          image: this.props.data.icon,\n          category_id: this.props.data.category_id\n        };\n        axios.put(url + '/subcategory/' + id, data, headers(this.props.user.token)).then(function (res) {\n          _this3.setState({\n            message: 'Success update subcategory',\n            open: true\n          });\n\n          _this3.props.update();\n        }).catch(function (err) {\n          _this3.setState({\n            message: 'Failed update subcategory'\n          });\n        });\n      } //post data if change image\n\n\n      if (name && file) {\n        axios.post(url + \"/subcategory/upload-image\", formData).then(function (res) {\n          var data = {\n            name: name,\n            image: res.data.url,\n            category_id: _this3.props.data.category_id\n          };\n          axios.put(url + '/subcategory/' + id, data, headers(_this3.props.user.token)).then(function (res) {\n            _this3.setState({\n              message: 'Success update subcategory',\n              open: true\n            });\n\n            _this3.props.update();\n          }).catch(function (err) {\n            _this3.setState({\n              message: 'Failed update subcategory'\n            });\n          });\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      var _this$state2 = this.state,\n          open = _this$state2.open,\n          name = _this$state2.name,\n          comfirm_delete = _this$state2.comfirm_delete,\n          message = _this$state2.message,\n          image = _this$state2.image;\n      var data = this.props.data;\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"message\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, message), React.createElement(\"div\", {\n        className: \"sub-category\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"photo\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }, image ? React.createElement(\"img\", {\n        src: image,\n        alt: \"image\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }) : React.createElement(\"img\", {\n        src: data.icon,\n        alt: \"image\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"name\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }, data.name)), React.createElement(\"div\", {\n        className: \"actions\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        onClick: function onClick() {\n          _this4.setState({\n            comfirm_delete: false\n          });\n        },\n        className: \"delete\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"demo-icon icon-minus\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }, \"\\uE814\"), \"delete\"), React.createElement(\"div\", {\n        onClick: function onClick() {\n          _this4.openUpdateCategory(data.name);\n        },\n        className: \"update\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"demo-icon icon-cog\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, \"\\uE81A\"), \"edit\"))), //open comfirm delete category\n      comfirm_delete ? '' : React.createElement(\"div\", {\n        className: \"comfirm-delete\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, \"Are you sure want to delete?\"), React.createElement(\"button\", {\n        onClick: function onClick() {\n          _this4.deleteCategory(data.sub_category_id);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, \"Yes\"), React.createElement(\"button\", {\n        onClick: function onClick() {\n          _this4.setState({\n            comfirm_delete: true\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }, \"No\"))), //open input for update category\n      open ? '' : React.createElement(\"div\", {\n        className: \"update-subcategory\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        onChange: this.handleImage,\n        type: \"file\",\n        accept: \"image/x-png,image/gif,image/jpeg\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }), React.createElement(\"form\", {\n        onSubmit: function onSubmit(e) {\n          _this4.updateCategory(e, data.sub_category_id);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        onChange: function onChange(e) {\n          _this4.setState({\n            name: e.target.value\n          });\n        },\n        value: name,\n        type: \"text\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        type: \"submit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }, \"Save\"))));\n    }\n  }]);\n\n  return SubCategory;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    user: state.userReducer\n  };\n};\n\nexport default connect(mapStateToProps)(SubCategory);","map":{"version":3,"sources":["E:\\ecart\\Admin-eCommerce-ReactJS\\src\\components\\Categories\\SubCategory.jsx"],"names":["React","Component","axios","url","headers","connect","SubCategory","state","open","comfirm_delete","name","message","openUpdateCategory","setState","handleImage","e","file","target","files","reader","FileReader","readAsDataURL","onloadend","image","result","id","delete","props","user","token","then","res","update","catch","err","preventDefault","formData","FormData","append","data","icon","category_id","put","post","deleteCategory","sub_category_id","updateCategory","value","mapStateToProps","userReducer"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport './subcategory.scss'\nimport axios from 'axios'\nimport { url, headers } from '../../config'\nimport { connect } from 'react-redux'\n\nclass SubCategory extends Component {\n    state = {\n        open : true,\n        comfirm_delete : true,\n        name : '',\n        message : ''\n    }\n\n\n    deleteCategory(id) {   \n        axios.delete( url+ '/subcategory/' + id , headers(this.props.user.token) )\n        .then(res=>{\n            this.setState({ comfirm_delete: true, message: 'Success delete subcategory' })\n            this.props.update()\n        })\n        .catch(err=>{\n            this.setState({ comfirm_delete: true, message: 'Failed delete subcategory' })\n        })\n    }\n\n\n    openUpdateCategory = (name) =>{\n        this.setState({ name, open: !this.state.open, message: '' })\n    }\n\n    handleImage = (e) => {\n        let file = e.target.files[0]\n        let reader = new FileReader()\n\n        reader.readAsDataURL(file)\n\n        reader.onloadend = () => {\n            this.setState({\n                file: file,\n                image: reader.result\n            })\n        }\n    }\n\n    updateCategory(e, id) {\n        e.preventDefault()\n        const { name, file, image } = this.state \n        let formData = new FormData()\n        formData.append('image', file)\n\n        //post data if no change image\n        if(name && !file){\n            let data = {\n                name,\n                image: this.props.data.icon,\n                category_id: this.props.data.category_id \n            }\n            axios.put( url + '/subcategory/' + id , data ,headers(this.props.user.token) )\n            .then(res=>{ \n                this.setState({ message: 'Success update subcategory', open: true })\n                this.props.update()\n            })\n            .catch(err=>{ this.setState({ message: 'Failed update subcategory' }) })\n        }\n\n        //post data if change image\n        if(name && file){\n            axios.post( url + \"/subcategory/upload-image\", formData )\n            .then(res=>{\n                let data = {\n                    name,\n                    image: res.data.url,\n                    category_id: this.props.data.category_id \n                }\n                axios.put( url + '/subcategory/' + id , data ,headers(this.props.user.token) )\n                .then(res=>{ \n                    this.setState({ message: 'Success update subcategory', open: true })\n                    this.props.update()\n                })\n                .catch(err=>{ this.setState({ message: 'Failed update subcategory' }) })\n            })\n        }\n    }\n\n    render() {\n        const { open, name, comfirm_delete, message, image } = this.state\n        const { data } = this.props\n        return (\n            <div>\n                <span className=\"message\">{message}</span>\n                <div className=\"sub-category\">\n                    <div className=\"photo\">\n                        { image ? <img src={image} alt=\"image\"/> : <img src={data.icon} alt=\"image\"/> }\n                    </div>\n                    <div className=\"name\">\n                        <span>{data.name}</span>\n                    </div>\n                    <div className=\"actions\">\n                        <div onClick={()=>{this.setState({ comfirm_delete : false})}} className=\"delete\">\n                            <i className=\"demo-icon icon-minus\">&#xe814;</i>delete\n                        </div>\n                        <div onClick={()=>{this.openUpdateCategory(data.name)}} className=\"update\">\n                            <i className=\"demo-icon icon-cog\">&#xe81a;</i>edit\n                        </div>\n                    </div>\n                </div>\n\n                { //open comfirm delete category\n                    comfirm_delete ? '' :\n                    <div className=\"comfirm-delete\">\n                        <div>\n                            <h3>Are you sure want to delete?</h3>\n                            <button onClick={()=>{this.deleteCategory(data.sub_category_id)}}>Yes</button>\n                            <button onClick={()=>{this.setState({ comfirm_delete: true })}}>No</button>\n                        </div>\n                    </div>\n                }\n                \n\n                { //open input for update category\n                    open ? '' :\n                    <div className=\"update-subcategory\">\n                        <input onChange={this.handleImage} type=\"file\" accept=\"image/x-png,image/gif,image/jpeg\"/>\n                        <form onSubmit={(e)=>{ this.updateCategory(e, data.sub_category_id) }}>\n                            <input onChange={(e)=>{this.setState({ name: e.target.value })}} value={name} type=\"text\" />\n                            <button type=\"submit\">Save</button>\n                        </form>\n                    </div>\n                }\n\n            </div>\n        );\n    }\n}\n\nconst mapStateToProps = (state) => {\n    return({\n        user: state.userReducer\n    })\n}\n\nexport default connect(mapStateToProps)(SubCategory);"]},"metadata":{},"sourceType":"module"}