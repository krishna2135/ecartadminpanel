{"ast":null,"code":"import _classCallCheck from \"E:\\\\ecart\\\\Admin-eCommerce-ReactJS\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"E:\\\\ecart\\\\Admin-eCommerce-ReactJS\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"E:\\\\ecart\\\\Admin-eCommerce-ReactJS\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"E:\\\\ecart\\\\Admin-eCommerce-ReactJS\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"E:\\\\ecart\\\\Admin-eCommerce-ReactJS\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"E:\\\\ecart\\\\Admin-eCommerce-ReactJS\\\\src\\\\components\\\\Orders\\\\New.jsx\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport { url, headers } from '../../config';\nimport _ from 'lodash';\nimport { connect } from 'react-redux';\nimport './new.scss';\nimport Order from './Order';\n\nvar New =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(New, _Component);\n\n  function New() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, New);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(New)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      orders: [],\n      loading: true,\n      message: ''\n    };\n\n    _this.confirm = function (id) {\n      _this.setState({\n        loading: true\n      });\n\n      var token = _this.props.user.token;\n      axios.get(url + \"/order/confirm?order_id=\" + id, headers(token)).then(function (res) {\n        _this.setState({\n          message: 'Success confirm order',\n          loading: false\n        });\n\n        _this.fetchOrdersUnconfirmed();\n      }).catch(function (err) {\n        _this.setState({\n          message: 'Failed confirm order',\n          loading: false\n        });\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(New, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.fetchOrdersUnconfirmed();\n    }\n  }, {\n    key: \"fetchOrdersUnconfirmed\",\n    value: function fetchOrdersUnconfirmed() {\n      var _this2 = this;\n\n      var orders = localStorage.getItem('neworders');\n\n      if (orders) {\n        this.setState({\n          orders: JSON.parse(orders),\n          loading: false\n        });\n      }\n\n      var token = this.props.user.token;\n      axios.get(url + \"/order/unconfirmed\", headers(token)).then(function (res) {\n        if (_.isArray(res.data.data)) {\n          localStorage.setItem(\"neworders\", JSON.stringify(res.data.data));\n\n          _this2.setState({\n            orders: res.data.data,\n            loading: false\n          });\n        }\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var _this$state = this.state,\n          orders = _this$state.orders,\n          loading = _this$state.loading,\n          message = _this$state.message;\n      return React.createElement(\"div\", {\n        className: \"new-order\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        style: {\n          color: 'red'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53\n        },\n        __self: this\n      }, message), loading ? React.createElement(\"div\", {\n        class: \"load\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54\n        },\n        __self: this\n      })) : React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55\n        },\n        __self: this\n      }, \" \", orders.length < 1 && React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55\n        },\n        __self: this\n      }, \"Empty\"), \" \", orders.length > 0 && orders.map(function (order) {\n        return React.createElement(Order, {\n          key: order.order_id,\n          status: \"new\",\n          order: order,\n          confirm: _this3.confirm,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 57\n          },\n          __self: this\n        });\n      })));\n    }\n  }]);\n\n  return New;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    user: state.userReducer\n  };\n};\n\nexport default connect(mapStateToProps)(New);","map":{"version":3,"sources":["E:\\ecart\\Admin-eCommerce-ReactJS\\src\\components\\Orders\\New.jsx"],"names":["React","Component","axios","url","headers","_","connect","Order","New","state","orders","loading","message","confirm","id","setState","token","props","user","get","then","res","fetchOrdersUnconfirmed","catch","err","localStorage","getItem","JSON","parse","isArray","data","setItem","stringify","color","length","map","order","order_id","mapStateToProps","userReducer"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios'\nimport { url, headers} from '../../config'\nimport _ from 'lodash'\nimport { connect } from 'react-redux'\nimport './new.scss'\n\nimport Order from './Order'\n\nclass New extends Component {\n    state = {\n        orders: [],\n        loading: true,\n        message: '',\n    }\n\n    componentDidMount(){\n        this.fetchOrdersUnconfirmed()\n    }\n\n    fetchOrdersUnconfirmed(){\n        let orders = localStorage.getItem('neworders') \n        if(orders){\n            this.setState({ orders: JSON.parse(orders), loading: false })\n        }\n        let token = this.props.user.token\n        axios.get( url + \"/order/unconfirmed\" , headers(token) )\n        .then( res => {\n            if(_.isArray(res.data.data)){\n                localStorage.setItem(\"neworders\", JSON.stringify(res.data.data))\n                this.setState({ orders: res.data.data, loading: false })\n            }\n        })\n    }\n\n    confirm = (id) => {\n        this.setState({ loading: true })\n        let token = this.props.user.token\n        axios.get( url + \"/order/confirm?order_id=\" + id ,  headers(token) )\n        .then(res=>{\n            this.setState({ message: 'Success confirm order', loading: false })\n            this.fetchOrdersUnconfirmed()\n        })\n        .catch(err=>{\n            this.setState({ message: 'Failed confirm order', loading: false })\n        })\n    }\n\n    render() {\n        const { orders, loading, message } = this.state\n        return (\n            <div className=\"new-order\">\n                <span style={{ color: 'red' }}>{message}</span>\n                { loading ? <div class=\"load\"><div></div><div></div><div></div></div> :\n                    <div> { orders.length < 1 && <div>Empty</div> } {\n                    orders.length > 0 && orders.map(order => \n                            <Order key={order.order_id} status=\"new\" order={order} confirm={this.confirm} />\n                        )\n                    }</div>\n                }\n            </div>\n        );\n    }\n}\n\nconst mapStateToProps = (state) => {\n    return({\n        user : state.userReducer\n    })\n}\n\nexport default connect(mapStateToProps)(New);"]},"metadata":{},"sourceType":"module"}