{"ast":null,"code":"import _defineProperty from \"E:\\\\ecart\\\\Admin-eCommerce-ReactJS\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"E:\\\\ecart\\\\Admin-eCommerce-ReactJS\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"E:\\\\ecart\\\\Admin-eCommerce-ReactJS\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"E:\\\\ecart\\\\Admin-eCommerce-ReactJS\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"E:\\\\ecart\\\\Admin-eCommerce-ReactJS\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"E:\\\\ecart\\\\Admin-eCommerce-ReactJS\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"E:\\\\ecart\\\\Admin-eCommerce-ReactJS\\\\src\\\\components\\\\Dashboard\\\\index.jsx\";\nimport React, { Component } from 'react';\nimport './dashboard.scss';\nimport axios from 'axios';\nimport { url, headers } from '../../config';\nimport { connect } from 'react-redux';\nimport Header from '../Header';\nimport Navbar from '../Navbar';\nimport Bank from './Bank';\n\nvar index =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(index, _Component);\n\n  function index() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, index);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(index)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      total: {\n        customers: '',\n        products: '',\n        unconfirmed_orders: ''\n      },\n      banks: [],\n      loading: true,\n      add: false,\n      bank_name: '',\n      account_name: '',\n      account_number: '',\n      message: ''\n    };\n\n    _this.fetchTotal = function () {\n      var total = localStorage.getItem('total');\n\n      if (total) {\n        _this.setState({\n          total: JSON.parse(total),\n          loading: false\n        });\n      }\n\n      axios.get(url + \"/count\", headers(_this.props.user.token)).then(function (res) {\n        if (res.data) localStorage.setItem('total', JSON.stringify(res.data));\n\n        _this.setState({\n          total: res.data,\n          loading: false\n        });\n      });\n    };\n\n    _this.fetchBank = function () {\n      var banks = localStorage.getItem('banks');\n\n      if (banks) {\n        _this.setState({\n          banks: JSON.parse(banks),\n          loading: false\n        });\n      }\n\n      axios.get(url + \"/bank\", headers(_this.props.user.token)).then(function (res) {\n        if (res.data) localStorage.setItem('banks', JSON.stringify(res.data));\n\n        _this.setState({\n          banks: res.data,\n          loading: false\n        });\n      });\n    };\n\n    _this.updateBank = function (id) {\n      if (id) {\n        axios.delete(url + \"/bank/\" + id, headers(_this.props.user.token)).then(function (res) {\n          _this.fetchBank();\n\n          _this.setState({\n            message: \"Success delete Bank\"\n          });\n        }).catch(function (err) {\n          _this.setState({\n            message: \"Failed delete Bank\"\n          });\n        });\n      } else {\n        _this.fetchBank();\n      }\n    };\n\n    _this.handleChange = function (e) {\n      _this.setState(_defineProperty({}, e.target.name, e.target.value));\n    };\n\n    _this.handleSubmit = function (e) {\n      e.preventDefault();\n      var _this$state = _this.state,\n          account_name = _this$state.account_name,\n          account_number = _this$state.account_number,\n          bank_name = _this$state.bank_name;\n\n      if (account_name && account_number && bank_name) {\n        var data = {\n          account_name: account_name,\n          account_number: account_number,\n          bank_name: bank_name\n        };\n        axios.post(url + \"/bank\", data, headers(_this.props.user.token)).then(function (res) {\n          _this.setState({\n            message: \"Success add Bank\",\n            add: false\n          });\n\n          _this.fetchBank();\n        }).catch(function (err) {\n          _this.setState({\n            message: \"Failed add Bank\",\n            add: false\n          });\n        });\n      }\n    };\n\n    return _this;\n  }\n\n  _createClass(index, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.fetchTotal();\n      this.fetchBank();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$state2 = this.state,\n          total = _this$state2.total,\n          banks = _this$state2.banks,\n          loading = _this$state2.loading,\n          add = _this$state2.add,\n          message = _this$state2.message;\n      return React.createElement(\"div\", {\n        className: \"dashboard\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }, React.createElement(Navbar, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }), React.createElement(Header, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"wrapper\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }, \"Overview\"), React.createElement(\"div\", {\n        className: \"total\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        onClick: function onClick() {\n          return _this2.props.history.push(\"/orders\");\n        },\n        className: \"card\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"demo-icon icon-card\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }, \"\\uE805\")), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, \"Recent Orders\"), React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, total.unconfirmed_orders))), React.createElement(\"div\", {\n        onClick: function onClick() {\n          return _this2.props.history.push(\"/products\");\n        },\n        className: \"card\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"demo-icon icon-cart\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, \"\\uE80D\")), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }, \"Total Products\"), React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }, total.products))), React.createElement(\"div\", {\n        onClick: function onClick() {\n          return _this2.props.history.push(\"/customers\");\n        },\n        className: \"card\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"demo-icon icon-costumers\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }, \"\\uE80A\")), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }, \"Total Costumers\"), React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }, total.customers)))), React.createElement(\"span\", {\n        style: {\n          marginRight: \"10px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }, \"My Bank\"), add ? React.createElement(\"button\", {\n        onClick: function onClick() {\n          return _this2.setState({\n            add: false\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }, \"Close\") : React.createElement(\"button\", {\n        onClick: function onClick() {\n          return _this2.setState({\n            add: true\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }, \"Add\"), add && React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        className: \"form-bank\",\n        onSubmit: this.handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        onChange: this.handleChange,\n        name: \"bank_name\",\n        placeholder: \"Bank name\",\n        type: \"text\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        onChange: this.handleChange,\n        name: \"account_number\",\n        placeholder: \"Account number\",\n        type: \"text\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        onChange: this.handleChange,\n        name: \"account_name\",\n        placeholder: \"Account name\",\n        type: \"text\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        type: \"submit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, \"Save\"))), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        style: {\n          color: 'red'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }, message), loading ? React.createElement(\"div\", {\n        className: \"load\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      })) : banks.map(function (bank) {\n        return React.createElement(Bank, {\n          key: bank.bank_id,\n          bank: bank,\n          update: _this2.updateBank,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 147\n          },\n          __self: this\n        });\n      }))));\n    }\n  }]);\n\n  return index;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    user: state.userReducer\n  };\n};\n\nexport default connect(mapStateToProps)(index);","map":{"version":3,"sources":["E:\\ecart\\Admin-eCommerce-ReactJS\\src\\components\\Dashboard\\index.jsx"],"names":["React","Component","axios","url","headers","connect","Header","Navbar","Bank","index","state","total","customers","products","unconfirmed_orders","banks","loading","add","bank_name","account_name","account_number","message","fetchTotal","localStorage","getItem","setState","JSON","parse","get","props","user","token","then","res","data","setItem","stringify","fetchBank","updateBank","id","delete","catch","err","handleChange","e","target","name","value","handleSubmit","preventDefault","post","history","push","marginRight","color","map","bank","bank_id","mapStateToProps","userReducer"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport './dashboard.scss'\nimport axios from 'axios'\nimport { url, headers } from '../../config'\nimport { connect } from 'react-redux'\nimport Header from '../Header'\nimport Navbar from '../Navbar'\nimport Bank from './Bank'\n\nclass index extends Component {\n    state = {\n        total : {\n            customers: '',\n            products: '',\n            unconfirmed_orders: ''\n        },\n        banks : [],\n        loading: true,\n        add: false,\n        bank_name: '',\n        account_name: '',\n        account_number: '',\n        message: '' \n    }\n\n    componentDidMount(){\n        this.fetchTotal()\n        this.fetchBank()\n    }\n\n    fetchTotal = () => {\n        let total = localStorage.getItem('total')\n        if(total){\n            this.setState({ total: JSON.parse(total), loading: false })\n        }\n        \n        axios.get( url + \"/count\" , headers(this.props.user.token) )\n        .then(res=>{\n            if( res.data )\n                localStorage.setItem('total', JSON.stringify(res.data))\n                this.setState({ total: res.data, loading: false })\n        })\n    }\n\n    fetchBank = () => {\n        let banks = localStorage.getItem('banks')\n        if(banks){\n            this.setState({ banks: JSON.parse(banks), loading: false })\n        }\n\n        axios.get( url + \"/bank\" , headers(this.props.user.token) )\n        .then(res=>{\n            if( res.data )\n                localStorage.setItem('banks', JSON.stringify(res.data))\n                this.setState({ banks: res.data, loading: false })\n        })\n    }\n\n    updateBank = (id) => {\n        if(id){\n            axios.delete( url + \"/bank/\" + id , headers(this.props.user.token) )\n            .then(res=>{\n                this.fetchBank()\n                this.setState({ message: \"Success delete Bank\" })\n            })\n            .catch(err=>{\n                this.setState({ message: \"Failed delete Bank\" })\n            })\n        } else {\n            this.fetchBank()\n        }\n    }\n\n    handleChange = (e) => {\n        this.setState({\n            [e.target.name] : e.target.value\n        })\n    }\n\n    handleSubmit = (e) => {\n        e.preventDefault()\n        const {account_name, account_number, bank_name} = this.state\n        if(account_name && account_number && bank_name){\n            const data = {\n                account_name,\n                account_number,\n                bank_name\n            }\n            axios.post( url + \"/bank\" , data , headers(this.props.user.token) )\n            .then(res =>{\n                this.setState({ message: \"Success add Bank\", add: false })\n                this.fetchBank()\n            })\n            .catch(err =>{\n                this.setState({ message: \"Failed add Bank\", add: false })\n            })\n        }\n    }\n\n    render() {\n        const { total, banks, loading, add, message } = this.state\n        return (\n            <div className=\"dashboard\">\n                <Navbar />\n                <Header />\n\n                <div className=\"wrapper\">\n                    <span>Overview</span>\n                    <div className=\"total\">\n                        <div onClick={()=>this.props.history.push(\"/orders\")} className=\"card\">\n                            <div><i className=\"demo-icon icon-card\">&#xe805;</i></div>\n                            <div>\n                                <p>Recent Orders</p>\n                                <h1>{total.unconfirmed_orders}</h1>\n                            </div>\n                        </div>\n                        <div onClick={()=>this.props.history.push(\"/products\")} className=\"card\">\n                            <div><i className=\"demo-icon icon-cart\">&#xe80d;</i></div>\n                            <div>\n                                <p>Total Products</p>\n                                <h1>{total.products}</h1>\n                            </div>\n                        </div>\n                        <div onClick={()=>this.props.history.push(\"/customers\")} className=\"card\">\n                            <div><i className=\"demo-icon icon-costumers\">&#xe80a;</i></div>\n                            <div>\n                                <p>Total Costumers</p>\n                                <h1>{total.customers}</h1>\n                            </div>\n                        </div>\n                    </div>\n                    <span style={{marginRight: \"10px\"}}>My Bank</span>\n                    { add ? <button onClick={()=>this.setState({ add: false })}>Close</button> : <button onClick={()=>this.setState({ add: true })}>Add</button> }\n                    { add && <div>\n                        <form className=\"form-bank\" onSubmit={this.handleSubmit}>\n                            <input onChange={this.handleChange} name=\"bank_name\" placeholder=\"Bank name\" type=\"text\"/>\n                            <input onChange={this.handleChange} name=\"account_number\" placeholder=\"Account number\" type=\"text\"/>\n                            <input onChange={this.handleChange} name=\"account_name\" placeholder=\"Account name\" type=\"text\"/>\n                            <button type=\"submit\">Save</button>\n                        </form>\n                    </div> }\n                    <div>\n                        <span style={{color: 'red'}}>{message}</span>\n                        {\n                            loading ? <div className=\"load\"><div></div><div></div><div></div></div> :\n                            banks.map( bank => \n                                <Bank key={bank.bank_id} bank={bank} update={this.updateBank} />\n                            )\n                        }\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nconst mapStateToProps = (state) => {\n    return({\n        user: state.userReducer\n    })\n}\n\nexport default connect(mapStateToProps)(index);"]},"metadata":{},"sourceType":"module"}