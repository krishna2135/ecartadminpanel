{"ast":null,"code":"import _defineProperty from \"E:\\\\ecart\\\\Admin-eCommerce-ReactJS\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"E:\\\\ecart\\\\Admin-eCommerce-ReactJS\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"E:\\\\ecart\\\\Admin-eCommerce-ReactJS\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"E:\\\\ecart\\\\Admin-eCommerce-ReactJS\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"E:\\\\ecart\\\\Admin-eCommerce-ReactJS\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"E:\\\\ecart\\\\Admin-eCommerce-ReactJS\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"E:\\\\ecart\\\\Admin-eCommerce-ReactJS\\\\src\\\\components\\\\Admin\\\\index.jsx\";\nimport React, { Component } from 'react';\nimport './admin.scss';\nimport { connect } from 'react-redux';\nimport axios from 'axios';\nimport { url, headers } from '../../config';\nimport { userAction } from '../../actions';\nimport Header from '../Header';\nimport Navbar from '../Navbar';\nimport Loading from '../Loading';\n\nvar index =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(index, _Component);\n\n  function index() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, index);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(index)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      edit: false,\n      username: '',\n      photo: '',\n      name: '',\n      email: '',\n      image: '',\n      file: null,\n      message: '',\n      loading: false,\n      change: false,\n      current_password: '',\n      new_password: ''\n    };\n\n    _this.handleChange = function (e) {\n      _this.setState(_defineProperty({}, e.target.name, e.target.value));\n    };\n\n    _this.handleImage = function (e) {\n      var file = e.target.files[0];\n      var reader = new FileReader();\n      reader.readAsDataURL(file);\n\n      reader.onloadend = function () {\n        _this.setState({\n          file: file,\n          image: reader.result\n        });\n      };\n    };\n\n    _this.saveProfile = function (e) {\n      e.preventDefault();\n\n      _this.setState({\n        loading: true\n      });\n\n      var token = _this.props.user.token;\n      var _this$state = _this.state,\n          username = _this$state.username,\n          name = _this$state.name,\n          email = _this$state.email,\n          photo = _this$state.photo,\n          file = _this$state.file;\n\n      if (file && username && name && email) {\n        var formData = new FormData();\n        formData.append('image', file);\n        axios.post(url + \"/admin/profile/upload-image\", formData, headers(token)).then(function (res) {\n          var data = {\n            username: username,\n            name: name,\n            email: email,\n            photo: res.data.url\n          };\n          axios.put(url + \"/admin/profile\", data, headers(token)).then(function (res) {\n            if (res.data.success) {\n              _this.props.userAction(res.data.profile, true, token);\n\n              var _res$data$profile = res.data.profile,\n                  _name = _res$data$profile.name,\n                  _email = _res$data$profile.email,\n                  _username = _res$data$profile.username,\n                  _photo = _res$data$profile.photo;\n\n              _this.setState({\n                message: \"Success update profile\",\n                loading: false,\n                edit: false,\n                name: _name,\n                email: _email,\n                username: _username,\n                photo: _photo\n              });\n            }\n          }).catch(function (err) {\n            _this.setState({\n              message: \"Failed update profile\",\n              loading: false,\n              edit: false\n            });\n          });\n        }).catch(function (err) {\n          _this.setState({\n            message: \"Failed Update\",\n            loading: false,\n            edit: false\n          });\n        });\n      }\n\n      if (username && name && email) {\n        var data = {\n          username: username,\n          name: name,\n          email: email,\n          photo: photo\n        };\n        axios.put(url + \"/admin/profile\", data, headers(token)).then(function (res) {\n          console.log(res);\n\n          if (res.data.success) {\n            _this.props.userAction(res.data.profile, true, token);\n\n            _this.setState({\n              message: \"Success update profile\",\n              loading: false,\n              edit: false\n            });\n          }\n        }).catch(function (err) {\n          _this.setState({\n            message: \"Failed update profile\",\n            loading: false,\n            edit: false\n          });\n        });\n      }\n    };\n\n    _this.changePassword = function (e) {\n      e.preventDefault();\n      var _this$state2 = _this.state,\n          new_password = _this$state2.new_password,\n          current_password = _this$state2.current_password;\n      var token = _this.props.user.token;\n\n      if (new_password && current_password) {\n        axios.put(url + \"/admin/profile/change-password\", {\n          current_password: current_password,\n          new_password: new_password\n        }, headers(token)).then(function (res) {\n          _this.setState({\n            change: false,\n            message: 'Success change password'\n          });\n        }).catch(function (err) {\n          _this.setState({\n            change: false,\n            message: 'Failed change password'\n          });\n        });\n      } else {\n        _this.setState({\n          change: false,\n          message: 'Failed change password'\n        });\n      }\n    };\n\n    return _this;\n  }\n\n  _createClass(index, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var data = this.props.user.data;\n\n      if (data) {\n        var username = data.username,\n            email = data.email,\n            photo = data.photo,\n            name = data.name;\n        this.setState({\n          username: username,\n          email: email,\n          photo: photo,\n          name: name\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$state3 = this.state,\n          change = _this$state3.change,\n          username = _this$state3.username,\n          email = _this$state3.email,\n          photo = _this$state3.photo,\n          name = _this$state3.name,\n          edit = _this$state3.edit,\n          image = _this$state3.image,\n          loading = _this$state3.loading,\n          message = _this$state3.message;\n      console.log(this.state);\n      return React.createElement(\"div\", {\n        className: \"account\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }, React.createElement(Header, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }), React.createElement(Navbar, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"wrapper\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }, loading ? React.createElement(Loading, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }) : '', !change ? '' : React.createElement(\"div\", {\n        className: \"change\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        onSubmit: this.changePassword,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        onClick: function onClick() {\n          return _this2.setState({\n            change: false\n          });\n        },\n        className: \"edit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        class: \"demo-icon icon-cancel\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }, \"\\uE80F\")), React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }, \"Change Password\"), React.createElement(\"label\", {\n        htmlFor: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }, \"Current Password\"), React.createElement(\"input\", {\n        onChange: function onChange(e) {\n          _this2.setState({\n            current_password: e.target.value\n          });\n        },\n        type: \"password\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }), React.createElement(\"label\", {\n        htmlFor: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }, \"New Password\"), React.createElement(\"input\", {\n        onChange: function onChange(e) {\n          _this2.setState({\n            new_password: e.target.value\n          });\n        },\n        type: \"password\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        type: \"submit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, \"save\"))), edit ? React.createElement(\"div\", {\n        className: \"profile\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }, message ? React.createElement(\"span\", {\n        style: {\n          color: 'red'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }, message) : '', React.createElement(\"div\", {\n        onClick: function onClick() {\n          return _this2.setState({\n            edit: false\n          });\n        },\n        className: \"edit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        class: \"demo-icon icon-cancel\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }, \"\\uE80F\")), React.createElement(\"div\", {\n        className: \"photo\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: image ? image : photo,\n        alt: \"admin\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      })), React.createElement(\"input\", {\n        onChange: this.handleImage,\n        type: \"file\",\n        accept: \"image/x-png,image/gif,image/jpeg\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"username\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }, \"Username\"), React.createElement(\"input\", {\n        value: username,\n        name: \"username\",\n        onChange: this.handleChange,\n        type: \"text\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"name\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      }, \"Name\"), React.createElement(\"input\", {\n        value: name,\n        name: \"name\",\n        onChange: this.handleChange,\n        type: \"text\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"email\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      }, \"Email\"), React.createElement(\"input\", {\n        value: email,\n        name: \"email\",\n        onChange: this.handleChange,\n        type: \"text\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"email\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        onClick: this.saveProfile,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165\n        },\n        __self: this\n      }, \"Save\"))) : React.createElement(\"div\", {\n        className: \"profile\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169\n        },\n        __self: this\n      }, message ? React.createElement(\"span\", {\n        style: {\n          color: 'red'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      }, message) : '', React.createElement(\"div\", {\n        onClick: function onClick() {\n          return _this2.setState({\n            edit: true\n          });\n        },\n        className: \"edit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"demo-icon icon-cog\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      }, \"\\uE81A\")), React.createElement(\"div\", {\n        className: \"photo\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: photo,\n        alt: \"admin\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"username\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178\n        },\n        __self: this\n      }, \"Username\"), React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178\n        },\n        __self: this\n      }, username)), React.createElement(\"div\", {\n        className: \"name\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181\n        },\n        __self: this\n      }, \"Name\"), React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181\n        },\n        __self: this\n      }, name)), React.createElement(\"div\", {\n        className: \"email\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184\n        },\n        __self: this\n      }, \"Email\"), React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184\n        },\n        __self: this\n      }, email)), React.createElement(\"div\", {\n        className: \"email\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187\n        },\n        __self: this\n      }, \"Password\"), React.createElement(\"button\", {\n        onClick: function onClick() {\n          return _this2.setState({\n            change: true\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187\n        },\n        __self: this\n      }, \"change\")))));\n    }\n  }]);\n\n  return index;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    user: state.userReducer\n  };\n};\n\nexport default connect(mapStateToProps, {\n  userAction: userAction\n})(index);","map":{"version":3,"sources":["E:\\ecart\\Admin-eCommerce-ReactJS\\src\\components\\Admin\\index.jsx"],"names":["React","Component","connect","axios","url","headers","userAction","Header","Navbar","Loading","index","state","edit","username","photo","name","email","image","file","message","loading","change","current_password","new_password","handleChange","e","setState","target","value","handleImage","files","reader","FileReader","readAsDataURL","onloadend","result","saveProfile","preventDefault","token","props","user","formData","FormData","append","post","then","res","data","put","success","profile","catch","err","console","log","changePassword","color","mapStateToProps","userReducer"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport './admin.scss'\nimport { connect } from 'react-redux'\nimport axios from 'axios'\nimport { url, headers } from '../../config'\nimport  { userAction } from '../../actions'\nimport Header from '../Header'\nimport Navbar from '../Navbar'\nimport Loading from '../Loading'\n\n\nclass index extends Component {\n    state={\n        edit: false,\n        username: '',\n        photo: '',\n        name: '',\n        email: '',\n        image: '',\n        file: null,\n        message: '',\n        loading: false,\n        change: false,\n        current_password: '',\n        new_password: ''\n    }\n\n    handleChange = (e) => {\n        this.setState({\n            [e.target.name] : e.target.value \n        })\n    }\n\n    componentDidMount(){\n        let data = this.props.user.data\n        if(data){\n            const { username, email, photo, name } = data\n            this.setState({ username, email, photo, name })\n        }\n    }\n\n    handleImage = (e) => {\n        let file = e.target.files[0]\n        let reader = new FileReader()\n\n        reader.readAsDataURL(file)\n\n        reader.onloadend = () => {\n            this.setState({\n                file: file,\n                image: reader.result\n            })\n        }\n    }\n\n    saveProfile = (e) => {\n        e.preventDefault()\n        this.setState({ loading: true })\n        let token = this.props.user.token\n        const { username, name, email, photo, file } = this.state\n        if(file && username && name && email){\n            let formData = new FormData()\n            formData.append('image' , file)\n            axios.post( url + \"/admin/profile/upload-image\", formData ,headers(token) )\n            .then( res => {\n                let data =  { username, name, email, photo: res.data.url }\n                axios.put( url + \"/admin/profile\" , data, headers(token) )\n                .then( res=>{\n                    if(res.data.success){\n                        this.props.userAction(res.data.profile, true, token)\n                        const { name, email, username, photo } = res.data.profile\n                        this.setState({ message: \"Success update profile\", loading: false, edit: false, name, email, username, photo })\n                    }\n                })\n                .catch(err=>{\n                    this.setState({ message: \"Failed update profile\", loading: false, edit: false })\n                })\n            })\n            .catch(err=>{\n                this.setState({ message: \"Failed Update\", loading: false, edit: false })\n            })\n        }\n\n        if( username && name && email ) {\n            let data =  { username, name, email, photo }\n            axios.put( url + \"/admin/profile\" , data, headers(token) )\n            .then( res=>{\n                console.log(res)\n                if(res.data.success){\n                    this.props.userAction(res.data.profile, true, token)\n                    this.setState({ message: \"Success update profile\", loading: false, edit: false })\n                }\n                \n            })\n            .catch(err=>{\n                this.setState({ message: \"Failed update profile\", loading: false, edit: false })\n            })\n        }\n    }\n\n    changePassword = (e) => {\n        e.preventDefault()\n        const { new_password, current_password } = this.state\n        let token = this.props.user.token\n        if(new_password && current_password){\n            axios.put( url + \"/admin/profile/change-password\" , { current_password, new_password } , headers(token) )\n            .then(res => {\n                this.setState({ change: false, message: 'Success change password' })\n            })\n            .catch(err => {\n                this.setState({ change: false, message: 'Failed change password' })                \n            })\n        } else {\n            this.setState({ change: false, message: 'Failed change password' })                \n        }\n    }\n\n    render() {\n        const { change, username, email, photo, name , edit, image, loading, message } = this.state\n        console.log(this.state)\n        return (\n            <div className=\"account\">\n                <Header />\n                <Navbar />\n                <div className=\"wrapper\">\n                { loading ? <Loading /> : '' }\n\n                { !change ? '' : \n                    <div className=\"change\">\n                        <form onSubmit={this.changePassword}>\n                            <div onClick={()=> this.setState({ change: false })} className=\"edit\">\n                                <i class=\"demo-icon icon-cancel\">&#xe80f;</i>\n                            </div>\n                            <h2>Change Password</h2>\n                            <label htmlFor=\"\">Current Password</label>\n                            <input onChange={(e)=>{this.setState({ current_password: e.target.value })}} type=\"password\"/>\n                            <label htmlFor=\"\">New Password</label>\n                            <input onChange={(e)=>{this.setState({ new_password: e.target.value })}} type=\"password\"/>\n                            <button type=\"submit\">save</button>\n                        </form>\n                    </div>\n                }\n\n                {\n                    edit ?\n                    <div className=\"profile\">\n                        { message ? <span style={{ color: 'red' }}>{message}</span> : '' }\n                        <div onClick={()=> this.setState({ edit: false })} className=\"edit\">\n                            <i class=\"demo-icon icon-cancel\">&#xe80f;</i>\n                        </div>\n                        <div className=\"photo\">\n                            <img src={image ? image : photo } alt=\"admin\"/>\n                        </div>\n                        <input onChange={this.handleImage} type=\"file\" accept=\"image/x-png,image/gif,image/jpeg\" />\n                        <div className=\"username\">\n                            <span>Username</span><input value={username} name=\"username\" onChange={this.handleChange} type=\"text\"/>\n                        </div>\n                        <div className=\"name\">\n                            <span>Name</span><input value={name} name=\"name\" onChange={this.handleChange} type=\"text\"/>\n                        </div>\n                        <div className=\"email\">\n                            <span>Email</span><input value={email} name=\"email\" onChange={this.handleChange} type=\"text\"/>\n                        </div>\n                        <div className=\"email\">\n                            <span></span><button onClick={this.saveProfile}>Save</button>\n                        </div>\n                    </div> \n                    :\n                    <div className=\"profile\">\n                        { message ? <span style={{ color: 'red' }}>{message}</span> : '' }\n                        <div onClick={()=> this.setState({ edit: true })} className=\"edit\">\n                            <i className=\"demo-icon icon-cog\">&#xe81a;</i>\n                        </div>\n                        <div className=\"photo\">\n                            <img src={photo} alt=\"admin\"/>\n                        </div>\n                        <div className=\"username\">\n                            <span>Username</span><span>{username}</span>\n                        </div>\n                        <div className=\"name\">\n                            <span>Name</span><span>{name}</span>\n                        </div>\n                        <div className=\"email\">\n                            <span>Email</span><span>{email}</span>\n                        </div>\n                        <div className=\"email\">\n                            <span>Password</span><button onClick={()=>this.setState({ change: true })} >change</button>\n                        </div>\n                    </div>\n                }\n\n                </div>\n            </div>\n        );\n    }\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        user: state.userReducer\n    }\n}\n\nexport default  connect(mapStateToProps,{ userAction })(index);       "]},"metadata":{},"sourceType":"module"}