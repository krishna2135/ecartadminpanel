{"ast":null,"code":"import _defineProperty from \"E:\\\\ecart\\\\Admin-eCommerce-ReactJS\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"E:\\\\ecart\\\\Admin-eCommerce-ReactJS\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"E:\\\\ecart\\\\Admin-eCommerce-ReactJS\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"E:\\\\ecart\\\\Admin-eCommerce-ReactJS\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"E:\\\\ecart\\\\Admin-eCommerce-ReactJS\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"E:\\\\ecart\\\\Admin-eCommerce-ReactJS\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"E:\\\\ecart\\\\Admin-eCommerce-ReactJS\\\\src\\\\components\\\\Product\\\\AddProduct.jsx\";\nimport React, { Component } from 'react';\nimport './addproduct.scss';\nimport axios from 'axios';\nimport ReactQuill from 'react-quill';\nimport { Link } from 'react-router-dom';\nimport 'react-quill/dist/quill.snow.css';\nimport { url, headers } from '../../config';\nimport { connect } from 'react-redux';\nimport _ from 'lodash';\nimport Header from '../Header';\nimport Navbar from '../Navbar';\nimport Loading from '../Loading';\n\nvar AddProduct =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(AddProduct, _Component);\n\n  function AddProduct() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, AddProduct);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(AddProduct)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      categories: [],\n      subcategories: [],\n      imagePreview: '',\n      message: '',\n      messageadd: '',\n      allinput: [],\n      allsize: [],\n      allstock: [],\n      size: '',\n      stock: '',\n      description: '',\n      success: false,\n      loading: false\n    };\n\n    _this.selectCategory = function (e) {\n      _this.setState({\n        category_id: e.target.value\n      });\n\n      var categories = _this.state.categories;\n      var selectcategories = categories.filter(function (el) {\n        return el.category_id == e.target.value;\n      });\n\n      if (!_.isUndefined(selectcategories[0])) {\n        _this.setState({\n          subcategories: selectcategories[0].subcategories\n        });\n      } else {\n        _this.setState({\n          subcategories: []\n        });\n      }\n    };\n\n    _this.addSize = function () {\n      var _this$state = _this.state,\n          allinput = _this$state.allinput,\n          allsize = _this$state.allsize,\n          size = _this$state.size,\n          allstock = _this$state.allstock,\n          stock = _this$state.stock;\n\n      if (size && stock) {\n        var input = allinput;\n        var num = allinput.length;\n        input.push(num);\n        var sizes = allsize;\n        sizes.push(size);\n        var stocks = allstock;\n        stocks.push(stock);\n\n        _this.setState({\n          allinput: input,\n          allsize: sizes,\n          allstock: stocks,\n          size: '',\n          stock: '',\n          messageadd: ''\n        });\n      } else {\n        _this.setState({\n          messageadd: 'Submit size and stock'\n        });\n      }\n    };\n\n    _this.handleChange = function (e) {\n      _this.setState(_defineProperty({}, e.target.name, e.target.value));\n    };\n\n    _this.handleImage = function (e) {\n      var file = e.target.files[0];\n      var reader = new FileReader();\n      reader.readAsDataURL(file);\n\n      reader.onloadend = function () {\n        _this.setState({\n          file: file,\n          imagePreview: reader.result\n        });\n      };\n    };\n\n    _this.handleSubmit = function (e) {\n      e.preventDefault();\n      var _this$state2 = _this.state,\n          imagePreview = _this$state2.imagePreview,\n          file = _this$state2.file,\n          allinput = _this$state2.allinput,\n          allsize = _this$state2.allsize,\n          allstock = _this$state2.allstock,\n          name = _this$state2.name,\n          code = _this$state2.code,\n          category_id = _this$state2.category_id,\n          sub_category_id = _this$state2.sub_category_id,\n          price = _this$state2.price,\n          weight = _this$state2.weight,\n          description = _this$state2.description;\n      var token = _this.props.user.token;\n      if (!description) _this.setState({\n        message: 'Submit description'\n      });\n      if (allsize.length < 1) _this.setState({\n        message: 'Click add size and stock'\n      });\n      if (!weight) _this.setState({\n        message: 'Submit weight'\n      });\n      if (!price) _this.setState({\n        message: 'Submit price'\n      });\n      if (!sub_category_id) _this.setState({\n        message: 'Select subcategory'\n      });\n      if (!category_id) _this.setState({\n        message: 'Select category'\n      });\n      if (!code) _this.setState({\n        message: 'Submit code'\n      });\n      if (!name) _this.setState({\n        message: 'Submit name'\n      });\n      if (!imagePreview) _this.setState({\n        message: 'Submit image'\n      });\n\n      _this.setState({\n        messageadd: ''\n      });\n\n      if (imagePreview && name && code && category_id && sub_category_id && price && weight && allsize && allstock && description) {\n        _this.setState({\n          loading: true\n        });\n\n        var data = new FormData();\n        data.append('image', file);\n        axios.post(url + \"/product/upload-image\", data, headers(token)).then(function (res) {\n          var data = new FormData();\n          allsize.map(function (v, i) {\n            data.append(\"size[]\", allsize[i]);\n            data.append(\"stock[]\", allstock[i]);\n          });\n          data.append(\"image\", res.data.url);\n          data.append(\"name\", name);\n          data.append(\"code\", code);\n          data.append(\"category_id\", category_id);\n          data.append(\"sub_category_id\", sub_category_id);\n          data.append(\"price\", price);\n          data.append(\"weight\", weight);\n          data.append(\"description\", description);\n          axios.post(url + \"/product\", data, headers(token)).then(function (res) {\n            _this.setState({\n              loading: false,\n              success: true,\n              message: '',\n              imagePreview: '',\n              name: '',\n              code: '',\n              category_id: '',\n              allsize: [],\n              allstock: [],\n              sub_category_id: '',\n              price: '',\n              weight: '',\n              description: '',\n              file: null\n            });\n\n            setTimeout(function () {\n              _this.setState({\n                success: false\n              });\n            }, 2000);\n          }).catch(function (err) {\n            _this.setState({\n              message: 'Failed add product',\n              loading: false\n            });\n          });\n        }).catch(function (err) {\n          _this.setState({\n            message: 'Failed connect server',\n            loading: false\n          });\n        });\n      }\n    };\n\n    return _this;\n  }\n\n  _createClass(AddProduct, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var categories = this.props.categories.data;\n\n      if (_.isArray(categories)) {\n        this.setState({\n          categories: categories\n        });\n      }\n    }\n  }, {\n    key: \"deleteSizes\",\n    value: function deleteSizes(i) {\n      var allsize = this.state.allsize;\n      var allstock = this.state.allstock;\n      var allinput = this.state.allinput;\n      allsize.splice(i, 1);\n      allstock.splice(i, 1);\n      allinput.splice(i, 1);\n      this.setState({\n        allsize: allsize,\n        allstock: allstock,\n        allinput: allinput\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$state3 = this.state,\n          categories = _this$state3.categories,\n          subcategories = _this$state3.subcategories,\n          loading = _this$state3.loading,\n          imagePreview = _this$state3.imagePreview,\n          allsize = _this$state3.allsize,\n          allstock = _this$state3.allstock,\n          name = _this$state3.name,\n          code = _this$state3.code,\n          size = _this$state3.size,\n          stock = _this$state3.stock,\n          category_id = _this$state3.category_id,\n          sub_category_id = _this$state3.sub_category_id,\n          price = _this$state3.price,\n          weight = _this$state3.weight,\n          description = _this$state3.description,\n          message = _this$state3.message,\n          messageadd = _this$state3.messageadd,\n          success = _this$state3.success;\n      return React.createElement(\"div\", {\n        className: \"add-wrapper\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200\n        },\n        __self: this\n      }, React.createElement(Header, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201\n        },\n        __self: this\n      }), React.createElement(Navbar, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202\n        },\n        __self: this\n      }), React.createElement(Link, {\n        to: \"/products\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"cancel\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"demo-icon icon-cancel\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204\n        },\n        __self: this\n      }, \"\\uE80F\"))), loading ? React.createElement(Loading, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206\n        },\n        __self: this\n      }) : '', React.createElement(\"div\", {\n        className: \"add-product\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209\n        },\n        __self: this\n      }, \"Add Product\"), success ? React.createElement(\"div\", {\n        className: \"success\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210\n        },\n        __self: this\n      }, \"Success\")) : \"\", React.createElement(\"div\", {\n        className: \"photo\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"image\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213\n        },\n        __self: this\n      }, imagePreview ? React.createElement(\"img\", {\n        src: imagePreview,\n        alt: \"imagePreview\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214\n        },\n        __self: this\n      }) : React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214\n        },\n        __self: this\n      })), React.createElement(\"label\", {\n        htmlFor: \"photo\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216\n        },\n        __self: this\n      }, \"Image  \", React.createElement(\"i\", {\n        className: \"demo-icon icon-picture\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216\n        },\n        __self: this\n      }, \"\\uE812\")), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        onChange: this.handleImage,\n        id: \"photo\",\n        type: \"file\",\n        accept: \"image/x-png,image/gif,image/jpeg\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217\n        },\n        __self: this\n      })), React.createElement(\"form\", {\n        onSubmit: this.handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        htmlFor: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 221\n        },\n        __self: this\n      }, \"Name\"), React.createElement(\"input\", {\n        value: name,\n        onChange: this.handleChange,\n        name: \"name\",\n        type: \"text\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222\n        },\n        __self: this\n      }), React.createElement(\"label\", {\n        htmlFor: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 223\n        },\n        __self: this\n      }, \"Code\"), React.createElement(\"input\", {\n        value: code,\n        onChange: this.handleChange,\n        name: \"code\",\n        type: \"text\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224\n        },\n        __self: this\n      }), React.createElement(\"label\", {\n        htmlFor: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 225\n        },\n        __self: this\n      }, \"Category\"), React.createElement(\"select\", {\n        value: category_id,\n        onChange: this.selectCategory,\n        name: \"category_id\",\n        id: \"category\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        value: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 227\n        },\n        __self: this\n      }, \"select\"), categories.map(function (category) {\n        return React.createElement(\"option\", {\n          key: category.category_id,\n          value: category.category_id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 231\n          },\n          __self: this\n        }, category.category_name);\n      })), React.createElement(\"label\", {\n        htmlFor: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 236\n        },\n        __self: this\n      }, \"Subcategory\"), React.createElement(\"select\", {\n        value: sub_category_id,\n        onChange: this.handleChange,\n        name: \"sub_category_id\",\n        id: \"sub_category\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 237\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        value: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 238\n        },\n        __self: this\n      }, \"select\"), subcategories.map(function (subcategory) {\n        return React.createElement(\"option\", {\n          key: subcategory.sub_category_id,\n          value: subcategory.sub_category_id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 242\n          },\n          __self: this\n        }, subcategory.name);\n      })), React.createElement(\"label\", {\n        htmlFor: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 247\n        },\n        __self: this\n      }, \"Price\"), React.createElement(\"input\", {\n        value: price,\n        placeholder: \"Rp\",\n        onChange: this.handleChange,\n        name: \"price\",\n        type: \"text\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 248\n        },\n        __self: this\n      }), React.createElement(\"label\", {\n        htmlFor: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 249\n        },\n        __self: this\n      }, \"Weight\"), React.createElement(\"input\", {\n        value: weight,\n        placeholder: \"gram\",\n        onChange: this.handleChange,\n        name: \"weight\",\n        type: \"text\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 250\n        },\n        __self: this\n      }), React.createElement(\"label\", {\n        htmlFor: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 252\n        },\n        __self: this\n      }, \"Size and Stock\"), React.createElement(\"div\", {\n        className: \"size-stock\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 254\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 255\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 256\n        },\n        __self: this\n      }, \"Size\"), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 256\n        },\n        __self: this\n      }), React.createElement(\"hr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 257\n        },\n        __self: this\n      }), allsize.map(function (size, i) {\n        return React.createElement(\"div\", {\n          className: \"size\",\n          key: i,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 261\n          },\n          __self: this\n        }, size, React.createElement(\"hr\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 263\n          },\n          __self: this\n        }));\n      }), React.createElement(\"input\", {\n        placeholder: \"Input size\",\n        onChange: this.handleChange,\n        value: size,\n        name: \"size\",\n        type: \"text\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 268\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 270\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 271\n        },\n        __self: this\n      }, \"Stock\"), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 271\n        },\n        __self: this\n      }), React.createElement(\"hr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 272\n        },\n        __self: this\n      }), allstock.map(function (stock, i) {\n        return React.createElement(\"div\", {\n          className: \"stock\",\n          key: i,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 276\n          },\n          __self: this\n        }, stock, \" \", React.createElement(\"span\", {\n          onClick: function onClick() {\n            return _this2.deleteSizes(i);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 277\n          },\n          __self: this\n        }, React.createElement(\"i\", {\n          className: \"demo-icon icon-minus\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 277\n          },\n          __self: this\n        }, \"\\uE814\")), React.createElement(\"hr\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 278\n          },\n          __self: this\n        }));\n      }), React.createElement(\"input\", {\n        placeholder: \"Input stock\",\n        onChange: this.handleChange,\n        value: stock,\n        name: \"stock\",\n        type: \"text\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 283\n        },\n        __self: this\n      }))), React.createElement(\"span\", {\n        className: \"message\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 287\n        },\n        __self: this\n      }, messageadd), React.createElement(\"span\", {\n        className: \"add\",\n        onClick: this.addSize,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 288\n        },\n        __self: this\n      }, \"Add size\"), React.createElement(\"label\", {\n        htmlFor: \"description\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 290\n        },\n        __self: this\n      }, \"Description\"), React.createElement(ReactQuill, {\n        className: \"description\",\n        value: description,\n        onChange: function onChange(value) {\n          return _this2.setState({\n            description: value\n          });\n        },\n        id: \"description\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 292\n        },\n        __self: this\n      }), React.createElement(\"span\", {\n        className: \"message\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 294\n        },\n        __self: this\n      }, message), React.createElement(\"button\", {\n        type: \"submit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 295\n        },\n        __self: this\n      }, \"Save\"))));\n    }\n  }]);\n\n  return AddProduct;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    categories: state.categoriesReducer,\n    user: state.userReducer\n  };\n};\n\nexport default connect(mapStateToProps)(AddProduct);","map":{"version":3,"sources":["E:\\ecart\\Admin-eCommerce-ReactJS\\src\\components\\Product\\AddProduct.jsx"],"names":["React","Component","axios","ReactQuill","Link","url","headers","connect","_","Header","Navbar","Loading","AddProduct","state","categories","subcategories","imagePreview","message","messageadd","allinput","allsize","allstock","size","stock","description","success","loading","selectCategory","e","setState","category_id","target","value","selectcategories","filter","el","isUndefined","addSize","input","num","length","push","sizes","stocks","handleChange","name","handleImage","file","files","reader","FileReader","readAsDataURL","onloadend","result","handleSubmit","preventDefault","code","sub_category_id","price","weight","token","props","user","data","FormData","append","post","then","res","map","v","i","setTimeout","catch","err","isArray","splice","category","category_name","subcategory","deleteSizes","mapStateToProps","categoriesReducer","userReducer"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport './addproduct.scss'\nimport axios from 'axios'\nimport ReactQuill from 'react-quill'\nimport { Link } from 'react-router-dom'\nimport 'react-quill/dist/quill.snow.css'\nimport { url, headers } from '../../config'\nimport { connect } from 'react-redux'\nimport _ from 'lodash'\n\nimport Header from '../Header'\nimport Navbar from '../Navbar'\nimport Loading from '../Loading'\n\nclass AddProduct extends Component {\n    state = {\n        categories: [],\n        subcategories: [],\n        imagePreview : '',\n        message : '',\n        messageadd: '',\n        allinput: [],\n        allsize: [],\n        allstock: [],\n        size: '',\n        stock: '',\n        description: '',\n        success: false,\n        loading: false,\n    }\n\n    componentDidMount(){\n        let categories = this.props.categories.data\n        if(_.isArray(categories)){\n            this.setState({ categories })\n        }\n    }\n\n    selectCategory = (e) => {\n        this.setState({\n            category_id : e.target.value\n        })\n\n        let categories = this.state.categories\n        let selectcategories = categories.filter((el)=>{\n            return(\n                el.category_id == e.target.value\n            )\n        })\n\n        if(!_.isUndefined(selectcategories[0])){\n            this.setState({ subcategories: selectcategories[0].subcategories })\n        } else {\n            this.setState({ subcategories: [] })\n        }\n    }\n\n    addSize = () => {\n        const { allinput, allsize, size, allstock, stock } = this.state\n\n        if(size && stock){\n            let input = allinput\n            let num = allinput.length\n            input.push(num)\n            \n            let sizes = allsize\n            sizes.push(size)\n    \n            let stocks = allstock\n            stocks.push(stock)\n    \n            this.setState({\n                allinput : input,\n                allsize : sizes,\n                allstock : stocks,\n                size: '',\n                stock : '',\n                messageadd: ''\n            })\n        } else {\n            this.setState({ messageadd: 'Submit size and stock' })\n        }\n    }\n\n    deleteSizes (i) {\n        let allsize = this.state.allsize\n        let allstock = this.state.allstock \n        let allinput = this.state.allinput   \n        \n\n        allsize.splice(i,1)\n        allstock.splice(i,1)\n        allinput.splice(i,1)\n\n        this.setState({\n            allsize,\n            allstock,\n            allinput\n        })\n    }\n\n    handleChange = (e) => {\n        this.setState({\n            [e.target.name] : e.target.value\n        })\n    }\n\n    handleImage = (e) => {\n        let file = e.target.files[0]\n        let reader = new FileReader()\n\n        reader.readAsDataURL(file)\n\n        reader.onloadend = () => {\n            this.setState({\n                file: file,\n                imagePreview: reader.result\n            })\n        }\n    }\n\n    handleSubmit = (e) => {\n        e.preventDefault()\n        const { imagePreview, file, allinput, allsize, allstock, name, code, category_id, sub_category_id, price, weight, description } = this.state\n        const token = this.props.user.token\n        \n        if(!description) this.setState({ message: 'Submit description' })        \n        if(allsize.length<1) this.setState({ message: 'Click add size and stock' })\n        if(!weight) this.setState({ message: 'Submit weight' })\n        if(!price) this.setState({ message: 'Submit price' })\n        if(!sub_category_id) this.setState({ message: 'Select subcategory' })\n        if(!category_id) this.setState({ message: 'Select category' })\n        if(!code) this.setState({ message: 'Submit code' })\n        if(!name) this.setState({ message: 'Submit name' })\n        if(!imagePreview) this.setState({ message: 'Submit image' })\n\n        this.setState({ messageadd: '' })\n\n        if(imagePreview && name && code && category_id && sub_category_id && price && weight && allsize && allstock && description ) {\n            this.setState({ loading: true })\n            let data = new FormData()\n            data.append('image', file )\n            axios.post( url + \"/product/upload-image\" , data , headers(token) )\n            .then(res=>{\n               \n                let data = new FormData()\n        \n                allsize.map((v , i) => {        \n                    data.append(\"size[]\", allsize[i])\n                    data.append(\"stock[]\", allstock[i])\n                })\n                \n                data.append(\"image\", res.data.url)\n                data.append(\"name\", name)\n                data.append(\"code\", code)\n                data.append(\"category_id\", category_id)\n                data.append(\"sub_category_id\", sub_category_id)\n                data.append(\"price\", price)\n                data.append(\"weight\", weight)\n                data.append(\"description\", description)\n        \n                axios.post( url + \"/product\" , data, headers(token) )\n                .then(res=>{\n                    this.setState({ \n                        loading: false,\n                        success: true, \n                        message: '',\n                        imagePreview: '',\n                        name: '',\n                        code: '',\n                        category_id: '',\n                        allsize : [],\n                        allstock : [],\n                        sub_category_id: '',\n                        price: '',\n                        weight: '',\n                        description: '',\n                        file: null\n                    })\n                    setTimeout(() => {\n                        this.setState({ success: false })\n                    }, 2000);\n                })\n                .catch(err=>{\n                    this.setState({ message: 'Failed add product', loading: false })\n                })\n\n            })\n            .catch(err=>{\n                this.setState({ message: 'Failed connect server', loading: false })\n            })\n\n        } \n        \n    }\n\n    render() {\n        const { categories, subcategories, loading, imagePreview, allsize, allstock, name, code, size, stock, category_id, sub_category_id, price, weight, description, message, messageadd, success } = this.state\n        return (\n            <div className=\"add-wrapper\">\n                <Header />\n                <Navbar />\n                <Link to='/products'>\n                    <div className=\"cancel\"><i className=\"demo-icon icon-cancel\">&#xe80f;</i></div>\n                </Link>\n                { loading ? <Loading /> : '' }\n\n                <div className=\"add-product\">\n                    <h1>Add Product</h1>\n                    { success ? <div className=\"success\"><div>Success</div></div> : \"\" }\n\n                    <div className=\"photo\">\n                        <div className=\"image\">\n                            { imagePreview ? <img src={imagePreview} alt=\"imagePreview\"/> : <div></div> } \n                        </div>\n                        <label htmlFor=\"photo\">Image  <i className=\"demo-icon icon-picture\">&#xe812;</i></label><br/>\n                        <input onChange={this.handleImage} id=\"photo\" type=\"file\" accept=\"image/x-png,image/gif,image/jpeg\"/>\n                    </div>\n\n                    <form onSubmit={this.handleSubmit}>\n                        <label htmlFor=\"\">Name</label>\n                        <input value={name} onChange={this.handleChange} name=\"name\" type=\"text\"/>\n                        <label htmlFor=\"\">Code</label>\n                        <input value={code} onChange={this.handleChange} name=\"code\" type=\"text\"/>\n                        <label htmlFor=\"\">Category</label>\n                        <select value={category_id} onChange={this.selectCategory} name=\"category_id\" id=\"category\">\n                            <option value=\"\">select</option>\n                            {\n                                categories.map(category=>{\n                                    return(\n                                        <option key={category.category_id} value={category.category_id}>{category.category_name}</option>\n                                    )\n                                })\n                            }\n                        </select>\n                        <label htmlFor=\"\">Subcategory</label>\n                        <select value={sub_category_id} onChange={this.handleChange} name=\"sub_category_id\" id=\"sub_category\">\n                            <option value=\"\">select</option>\n                            {\n                                subcategories.map(subcategory=>{\n                                    return(\n                                        <option key={subcategory.sub_category_id} value={subcategory.sub_category_id}>{subcategory.name}</option>\n                                    )\n                                })\n                            }\n                        </select>\n                        <label htmlFor=\"\">Price</label>\n                        <input value={price} placeholder=\"Rp\" onChange={this.handleChange} name=\"price\" type=\"text\"/>\n                        <label htmlFor=\"\">Weight</label>\n                        <input value={weight} placeholder=\"gram\"  onChange={this.handleChange} name=\"weight\" type=\"text\"/>\n                        \n                        <label htmlFor=\"\">Size and Stock</label>\n\n                        <div className=\"size-stock\">\n                            <div>\n                                <span>Size</span><br/>\n                                <hr/>\n                                {\n                                    allsize.map((size, i)=>{\n                                        return(\n                                                <div className=\"size\" key={i}>\n                                                    {size}\n                                                    <hr/>\n                                                </div>\n                                        )\n                                    })\n                                }\n                                <input placeholder=\"Input size\" onChange={this.handleChange} value={size} name=\"size\" type=\"text\"/>\n                            </div>\n                            <div>\n                                <span>Stock</span><br/>\n                                <hr/>\n                                {\n                                    allstock.map((stock, i)=>{\n                                        return(\n                                                <div className=\"stock\" key={i}>\n                                                    {stock} <span onClick={()=>this.deleteSizes(i)}><i className=\"demo-icon icon-minus\">&#xe814;</i></span>\n                                                    <hr/>\n                                                </div>\n                                        )\n                                    })\n                                }\n                                <input placeholder=\"Input stock\" onChange={this.handleChange} value={stock} name=\"stock\" type=\"text\"/>\n                            </div>\n                        \n                        </div>\n                        <span className=\"message\">{messageadd}</span>\n                        <span className=\"add\" onClick={this.addSize}>Add size</span>\n\n                        <label htmlFor=\"description\">Description</label>\n\n                        <ReactQuill className=\"description\" value={description} onChange={ (value)=>this.setState({ description: value }) } id=\"description\"/>\n\n                        <span className=\"message\">{message}</span>\n                        <button type=\"submit\">Save</button>\n                    </form>\n                </div>\n            </div>\n        );\n    }\n}\n\nconst mapStateToProps = (state) => {\n    return({\n        categories : state.categoriesReducer,\n        user : state.userReducer\n    })\n}\n\nexport default connect(mapStateToProps )(AddProduct);"]},"metadata":{},"sourceType":"module"}